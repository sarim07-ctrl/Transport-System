#include <iostream>
#include <string>

using namespace std;

const int MAX_VEHICLES = 10;

struct Vehicle {
    string name;
    string route;
    int totalSeats;
    int bookedSeats;
};

Vehicle vehicles[MAX_VEHICLES];
int vehicleCount = 0;

// Load sample data
void loadSampleData() {
    vehicleCount = 3;

    vehicles[0] = {"Bus1", "Islamabad-Lahore", 40, 5};
    vehicles[1] = {"Bus2", "Islamabad-Peshawar", 35, 10};
    vehicles[2] = {"Van1", "Islamabad-Rawalpindi", 15, 3};
}

// Display vehicles
void viewVehicles() {
    cout << "\nAvailable Vehicles:\n";
    for (int i = 0; i < vehicleCount; i++) {
        cout << i + 1 << ". " << vehicles[i].name
             << " - " << vehicles[i].route
             << " | Available Seats: "
             << vehicles[i].totalSeats - vehicles[i].bookedSeats << endl;
    }
}

// Book seat
void bookSeat() {
    int choice;
    viewVehicles();
    cout << "Enter vehicle number to book: ";
    cin >> choice;
    choice--;

    if (choice >= 0 && choice < vehicleCount) {
        if (vehicles[choice].bookedSeats < vehicles[choice].totalSeats) {
            vehicles[choice].bookedSeats++;
            cout << "Seat booked successfully!\n";
        } else {
            cout << "No seats available.\n";
        }
    } else {
        cout << "Invalid selection.\n";
    }
}

// Cancel booking
void cancelBooking() {
    int choice;
    viewVehicles();
    cout << "Enter vehicle number to cancel booking: ";
    cin >> choice;
    choice--;

    if (choice >= 0 && choice < vehicleCount) {
        if (vehicles[choice].bookedSeats > 0) {
            vehicles[choice].bookedSeats--;
            cout << "Booking cancelled successfully.\n";
        } else {
            cout << "No booking to cancel.\n";
        }
    } else {
        cout << "Invalid selection.\n";
    }
}

// Passenger menu
void passengerMenu() {
    int choice;
    do {
        cout << "\n--- Passenger Menu ---\n";
        cout << "1. View Routes\n";
        cout << "2. Book Seat\n";
        cout << "3. Cancel Booking\n";
        cout << "4. Back to Main Menu\n";
        cout << "Enter choice: ";
        cin >> choice;

        switch (choice) {
            case 1: viewVehicles(); break;
            case 2: bookSeat(); break;
            case 3: cancelBooking(); break;
            case 4: cout << "Returning...\n"; break;
            default: cout << "Invalid choice.\n";
        }
    } while (choice != 4);
}

int main() {
    loadSampleData();
    int choice;
    do {
        cout << "\n=== Transport Booking System (Console) ===\n";
        cout << "1. Passenger\n";
        cout << "2. Exit\n";
        cout << "Enter choice: ";
        cin >> choice;

        switch (choice) {
            case 1: passengerMenu(); break;
            case 2: cout << "Program ended.\n"; break;
            default: cout << "Invalid choice.\n";
        }
    } while (choice != 2);

    return 0;
}
